<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">

	<link rel="stylesheet" href="style.css">
	<title>Results</title>
</head>
<body>
<div class="content">
	<form action="" method="post" class="survey-form">
		<p>Most Popular Technologies</p>
		<div class="survey-chart"></div>
		<div class="survey-description">{{count}} votes</div>
	</form>
</div>
<script src="http://cdnjs.cloudflare.com/ajax/libs/d3/3.5.16/d3.min.js"></script>
<script>
	var data = [
		{label: 'Node.js', value: {{node}} },
		{label: 'Java', value: {{java}} },
		{label: '.NET', value: {{dotnet}} }
	];

	var i = 0;
	d3.select('.survey-chart')
			.selectAll('div')
			.data(function () {
				return data.map(function (d) {
					return d.value
				});
			})
			.enter()
			.append('div')
			.style('max-width', function (d) {
				return (100 / d3.max(data.map(function (d) {
					return d.value
				}))) * d + '%';
			})
			.html(function (d) {
				return data[i++].label + ' <strong>' + d + '</strong>';
			});
</script>
</body>
</html>